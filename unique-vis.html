<!DOCTYPE>
<html>
	<head>
		<title>CCA TimeStudio 3: PIXI example 1</title>
		<style>body { margin: 0; }</style>
		<script src="http://www.goodboydigital.com/pixijs/examples/snake/pixi.dev.js"></script>
	</head>
	<body>
		<script>

			var interactive = true;
			var stage = new PIXI.Stage(0xffffff, true);

			var renderer = new PIXI.WebGLRenderer(window.innerWidth,window.innerHeight);

			document.body.appendChild(renderer.view);

			//The primitive shapes


			var tri1 = new PIXI.Graphics();
			var score = 0;

			var scoreText = new PIXI.Text("SCORE: " + score);
			scoreText.x = 100;
			scoreText.y = 100;

			stage.addChild(scoreText);

			tri1.beginFill(0x000000);

			// test.moveTo(0, -49.6);
			// test.lineTo(43.5, 25.1);
			// test.lineTo(-43.5, 25.1);
			// test.lineTo(0, -49.6);
			// test.endFill();
			tri1.moveTo(-25, -25);
			tri1.lineTo(25, 25);
			tri1.lineTo(-25, 25);
			tri1.lineTo(-25, -25);
			tri1.endFill();
			tri1.interactive = true;
			tri1.hitArea = tri1.getBounds();

			// tri1.x = window.innerWidth/2;
			// tri1.y = window.innerHeight/2;
			//
			// var goalRed = new PIXI.Graphics();
			// goalRed.beginFill(0xff0000);
			// goalRed.moveTo(0, -20);
			// goalRed.lineTo(10, -20);
			// goalRed.lineTo(10, 20);
			// goalRed.lineTo(0, 20);
			// goalRed.lineTo(0, -20);
			// goalRed.endFill();
			//
			// goalRed.y = window.innerHeight/2;
			//
			// stage.addChild(goalRed);
			//
			// var goalGreen = new PIXI.Graphics();
			// goalGreen.beginFill(0x008000);
			// goalGreen.moveTo(0, -20);
			// goalGreen.lineTo(-10, -20);
			// goalGreen.lineTo(-10, 20);
			// goalGreen.lineTo(0, 20);
			// goalGreen.lineTo(0, -20);
			// goalGreen.endFill();
			// stage.addChild(goalGreen);
			//
			// goalGreen.x = window.innerWidth;
			// goalGreen.y =  window.innerHeight/2;

			var circle = new PIXI.Graphics();
			var bumped = 0;

			var circleDirX = 0;
			var circleDirY = 1;

			var circleSpeed = 1;
			var randomColor = Math.floor((Math.random() * 2) + 1);

			if (randomColor = 1) {
				circle.beginFill(0xff0000);
				circleFill = 1;
			}else {
				circle.beginFill(0x008000);
				circleFill = 2;
			}

			circle.drawCircle(window.innerWidth/2, 100, 10);
			circle.endFill();



			stage.addChild(tri1);
			stage.addChild(circle);



			var speed = 10;




			//Add all the parts to the stage
			requestAnimFrame(animate);


			moveCircle = function() {

				circle.x += circleDirX * circleSpeed;
				circle.y += circleDirY * circleSpeed;

			}


			tri1.click = function(){

				tri1.rotation += Math.PI/4;
				console.log(tri1.rotation);
				if(tri1.rotation == 2*Math.PI) {
					tri1.rotation = 0;
				}
			}




			function animate() {

				renderer.render(stage);
				//console.log(tri1.position.y - circle.position.y);
				if(circle.y >= window.innerHeight/2 - 100&& bumped == 0) {
					if(tri1.rotation == 0) {
						circleDirX = 1;
						circleDirY = 0;
						bumped = 1;
					}
					else if(tri1.rotation == 3 * Math.PI/2) {
						circleDirX = -1;
						circleDirY = 0;
						bumped = 1;
					}
					else {
						score = 0;
						scoreText.setText("SCORE: " + score)
						circleSpeed = 1;
						createNewCircle();
						bumped = 0;
					}

				}
				 console.log(circle.position.x);

				if (circle.x < -window.innerWidth/2){
					if(circleFill == 1) {
						score++;
						scoreText.setText("SCORE: " + score)
						bumped = 0;
					}
					else {
						score = 0;
						scoreText.setText("SCORE: " + score)
						bumped = 0;
						circleSpeed = 1;
					}
					console.log("BAMMM");
					//removeChild(circle);
					createNewCircle();
				}
				else if(circle.x > window.innerWidth/2) {
					if(circleFill == 2) {
						score++;
						scoreText.setText("SCORE: " + score)
						bumped = 0;
					}
					else {
						score = 0;
						scoreText.setText("SCORE: " + score)
						bumped = 0;
						circleSpeed = 1;
					}
					console.log("BAMMM");
					//removeChild(circle);
					createNewCircle();
				}

				moveCircle();
				requestAnimFrame(animate);


			}



			//This was for an old itteration
			function randomIntFromInterval(min,max) {
			    return Math.floor(Math.random()*(max-min+1)+min);
			}

			//addChild()


			// function Bumber(xPos, yPos, rotation) {

			// 	this.tri = new PIXI.Graphics();

			// 	this.tri.beginFill(0x000000);

			// 	this.tri.moveTo(-25, -25);
			// 	this.tri.lineTo(25, 25);
			// 	this.tri.lineTo(-25, 25);
			// 	this.tri.lineTo(-25, -25);
			// 	this.tri.endFill();
			// 	this.tri.interactive = true;
			// 	this.tri.hitArea = thisTri.getBounds();

			// 	this.tri.x = xPos;
			// 	this.tri.y = yPos;

			// 	addChild(this.tri);
			// 	// this.click = function(e) {

			// 	// 	this.tri.rotation+=Math.PI/4;

			// 	// }

			// }


			function createNewCircle() {


				circleDirX = 0;
				circleDirY = 1;

				circleSpeed +=.2;
				randomColor = Math.floor((Math.random() * 2) + 1);

				circle.clear();
				if (randomColor == 1) {
					circle.beginFill(0xff0000);
					circleFill = 1;
				}else {
					circle.beginFill(0x008000);
					circleFill = 2;
				}

				circle.drawCircle(window.innerWidth/2, 100, 10);
				circle.endFill();

				circle.x = 0;
				circle.y = 0;



			}
			// var ballImg = "ping.png";
			// var paddleImg = "paddle.png";

			// var ballTexture = PIXI.Texture.fromImage(ballImg);
			// var ball = new PIXI.Sprite(ballTexture);

			// var paddleTexture = PIXI.Texture.fromImage(paddleImg);
			// var paddle = new PIXI.Sprite(paddleTexture);



			// function createLogo() {
			// 	var newLogo = new PIXI.Sprite(texture);
			// 	newLogo.anchor.set(0.5, 0.5);

			// 	newLogo.rotation =Math.random() * Math.PI * 2;

			// 	newLogo.position.set(
			// 		Math.random() * window.innerWidth,
			// 		Math.random() * window.innerHeight);

			// 	stage.addChild(newLogo);
			// }

			//setInterval(createLogo, 10);

		</script>
	</body>
</html>
